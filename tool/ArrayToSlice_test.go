package tool

import (
	"github.com/stretchr/testify/assert"
	"testing"
	"unsafe"
)

func TestInterfaceArrayToSlice(t *testing.T) {
	data := []byte{
		0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88,
		0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88,
		0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99,
	}
	type ObjXX struct {
		data [25]byte
	}
	p := &ObjXX{
		data: [25]byte{
			0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88,
			0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88,
			0x11, 0x22, 0x33, 0x44, 0x55, 0x66, 0x77, 0x88, 0x99,
		},
	}
	obj := new(LibArrayToSlice)
	assert.Equal(t, obj.ArrayToSlice(unsafe.Pointer(&p.data), len(p.data)), data)
}
